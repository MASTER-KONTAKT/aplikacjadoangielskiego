<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Word Learning</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f4f4f4;
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 100vh;
}

.progress-bar-container {
    width: 100%;
    height: 20px;
    background-color: #ddd;
    position: relative;
    display: flex;
    align-items: center;
}

.progress-bar {
    height: 100%;
    width: 0%;
    background-color: #28a745;
    transition: width 0.3s ease;
}

.exit-btn {
    position: absolute;
    right: 10px;
    top: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 18px;
    color: white;
    font-weight: bold;
}

.container {
    display: flex;
    flex: 1;
    width: 100%;
    max-width: 1000px;
    margin-top: 10px;
    gap: 20px;
}

.side {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    position: relative;
}

.mascot {
    width: 160px;
    opacity: 0;
    transform: translateY(50px);
    transition: opacity 0.1s ease, transform 1.0s ease;
    position: absolute;
    bottom: 120px;
    left: 10px;
}

.mascot.show {
    opacity: 1;
    transform: translateY(0);
}

.chat-bubble {
    position: absolute;
    bottom: 190px;
    left: 130px;
    background: white;
    border: 2px solid #ccc;
    border-radius: 10px;
    padding: 10px 14px;
    font-weight: bold;
    font-size: 14px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    display: none;
    max-width: 180px;
    animation: pop 1.0s ease;
}

.chat-bubble::after {
    content: "";
    position: absolute;
    left: -10px;
    bottom: 15px;
    border-width: 10px;
    border-style: solid;
    border-color: transparent white transparent transparent;
}

@keyframes pop {
    0% { transform: scale(0.7); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}

.main-content {
    flex: 2;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    padding: 30px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    position: relative;
}

h2 { 
    text-align: center; 
    color: #333; 
}

.word-number {
    position: absolute;
    top: 10px;
    left: 10px;
    font-size: 14px;
    font-weight: bold;
}

.word {
    font-size: 28px;
    font-weight: bold;
}

#word-container {
    display: inline-flex;        
    justify-content: center;
    align-items: center;
    gap: 3px;                    
    margin-bottom: 20px;
}

#speak-btn {
    font-size: 28px;             
    cursor: pointer;
    user-select: none;           
    line-height: 1;              
    vertical-align: middle;      
    padding: 0;
    margin: 0;
    background: none;            
    border: none;                
    visibility: hidden;          /* niewidoczny na poczƒÖtku */
    transition: transform 0.2s ease, visibility 0.2s;
}

#speak-btn:hover {
    transform: scale(1.2);
}

input[type="text"] {
    width: 100%;
    padding: 10px;
    margin-bottom: 20px;
    border-radius: 5px;
    border: 1px solid #ccc;
    font-size: 18px;
}

button {
    width: 100%;
    padding: 10px;
    background-color: #4b935c;
    color: white;
    border: none;
    border-radius: 5px;
    font-size: 18px;
    cursor: pointer;
}

button:disabled { 
    background-color: #ccc; 
}

.bottom-bar {
    position: fixed;
    bottom: -100px;
    left: 0;
    width: 100%;
    padding: 15px 0;
    font-size: 18px;
    font-weight: bold;
    color: white;
    text-align: center;
    box-shadow: 0 -2px 8px rgba(0,0,0,0.2);
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    transition: bottom 0.5s ease;
}

.bottom-bar.show { bottom: 0; }

.continue-btn {
    border: none;
    border-radius: 5px;
    padding: 5px 10px;
    cursor: pointer;
    font-size: 14px;
    font-weight: bold;
    width: 100px;
}

.goto-word {
    display: flex;
    justify-content: center;
    margin-top: 10px;
    gap: 5px;
}

.goto-word input { 
    width: 60px; 
    padding: 5px; 
}

.goto-word button { 
    width: auto; 
    padding: 5px 10px; 
    font-size: 14px; 
}

.finish-bar-container {
    width: 80%;
    background-color: #ddd;
    border-radius: 5px;
    margin: 10px auto 0;
    height: 15px;
    overflow: hidden;
}

.finish-bar {
    height: 100%;
    width: 0%;
    background-color: #28a745;
    transition: width 3s linear;
}
</style>
</head>
<body>

<div class="progress-bar-container">
    <div class="progress-bar" id="progress-bar"></div>
    <div class="exit-btn" onclick="window.location.href='index.html'">‚úñ</div>
</div>

<div class="container">
    <div class="side">
        <img src="mascot.png" class="mascot" id="mascot">
        <div class="chat-bubble" id="chat-bubble"></div>
    </div>

    <div class="main-content">
        <div class="word-number" id="word-number"></div>
        <h2 id="main-title">Przet≈Çumacz s≈Çowo:</h2>
        <div id="word-container">
            <span id="word" class="word"></span>
            <span id="speak-btn">üîä</span>
        </div>
        <input type="text" id="answer" placeholder="Wpisz odpowied≈∫...">
        <button id="submit" onclick="checkAnswer()">Sprawd≈∫ odpowied≈∫</button>
        <div class="goto-word" id="goto-word-container">
            <input type="number" id="go-to-word" placeholder="Nr s≈Çowa" min="1">
            <button onclick="goToWord()">Id≈∫</button>
        </div>
    </div>
    <div class="side"></div>
</div>

<div id="bottom-bar" class="bottom-bar">
    <span id="bar-message"></span>
    <button id="continue-btn" class="continue-btn" onclick="nextWord()">Continue</button>
</div>

<div class="finish-bar-container" id="finish-bar-container" style="display:none;">
    <div class="finish-bar" id="finish-bar"></div>
</div>

<script>
const words = [
    { pl: "drzewo", en: "tree" },
    { pl: "dom", en: "house" },
    { pl: "pies", en: "dog" }
];

const mascotMessages = ["Great!", "Nice!", "Good job!", "Awesome!", "Well done!"];
let currentIndex = 0;

const speakBtn = document.getElementById("speak-btn");

function displayWord() {
    document.getElementById("word").textContent = words[currentIndex].pl;
    document.getElementById("answer").value = '';
    document.getElementById("submit").disabled = false;
    document.getElementById("bottom-bar").classList.remove("show");
    document.getElementById("word-number").textContent = `S≈Çowo ${currentIndex + 1} z ${words.length}`;
    document.getElementById("goto-word-container").style.display = 'flex';
    hideMascot();
    updateProgressBar();
    speakBtn.style.visibility = 'hidden'; // ukryj g≈Ço≈õniczek przy nowym s≈Çowie
}

function showMascot() {
    document.getElementById("mascot").classList.add("show");
}
function hideMascot() {
    document.getElementById("mascot").classList.remove("show");
    document.getElementById("chat-bubble").style.display = "none";
}
function showMascotMessage(text) {
    const bubble = document.getElementById("chat-bubble");
    bubble.textContent = text;
    bubble.style.display = "block";
}

function checkAnswer() {
    const answer = document.getElementById("answer").value.trim().toLowerCase();
    const correctAnswer = words[currentIndex].en.toLowerCase();
    const bar = document.getElementById("bottom-bar");
    const message = document.getElementById("bar-message");
    const continueBtn = document.getElementById("continue-btn");

    showMascot();

    if (answer === correctAnswer) {
        bar.style.backgroundColor = "#B5EB8B";
        message.textContent = "‚úÖ Perfect!";
        continueBtn.style.backgroundColor = "#28a745";
        continueBtn.style.color = "white";
        showMascotMessage(mascotMessages[Math.floor(Math.random() * mascotMessages.length)]);
    } else {
        bar.style.backgroundColor = "#F1948A";
        message.textContent = `‚ùå ≈πle! Poprawna odpowied≈∫: ${words[currentIndex].en}`;
        continueBtn.style.backgroundColor = "#dc3545";
        continueBtn.style.color = "white";
        showMascotMessage("Ups! Spr√≥buj jeszcze raz!");
    }

    speakBtn.style.visibility = 'visible'; // poka≈º g≈Ço≈õniczek po odpowiedzi
    bar.classList.add("show");
    document.getElementById("submit").disabled = true;
}

speakBtn.addEventListener("click", () => {
    const text = words[currentIndex].en;
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'en-US';
    speechSynthesis.speak(utterance);
});

function nextWord() {
    hideMascot();
    currentIndex++;
    if (currentIndex < words.length) {
        displayWord();
    } else {
        document.getElementById("word").textContent = "Gratulacje! Uko≈Ñczy≈Çe≈õ wszystkie s≈Çowa.";
        document.getElementById("answer").style.display = 'none';
        document.getElementById("submit").style.display = 'none';
        document.getElementById("goto-word-container").style.display = 'none';
        document.getElementById("bottom-bar").classList.remove("show");
        speakBtn.style.display = 'none'; // ukryj g≈Ço≈õniczek po zako≈Ñczeniu

        const finishContainer = document.getElementById("finish-bar-container");
        const finishBar = document.getElementById("finish-bar");
        finishContainer.style.display = 'block';
        setTimeout(() => { finishBar.style.width = '100%'; }, 50);
        setTimeout(() => { window.location.href = 'index.html'; }, 3000);
    }
}

function updateProgressBar() {
    const progress = (currentIndex / words.length) * 100;
    document.getElementById("progress-bar").style.width = progress + "%";
}

function goToWord() {
    const goToIndex = parseInt(document.getElementById("go-to-word").value) - 1;
    if (!isNaN(goToIndex) && goToIndex >= 0 && goToIndex < words.length) {
        currentIndex = goToIndex;
        displayWord();
    } else {
        alert("Numer s≈Çowa jest poza zakresem!");
    }
}

document.getElementById("answer").addEventListener("keydown", function(event) {
    const continueBtn = document.getElementById("continue-btn");
    if (event.key === "Enter") {
        if (!document.getElementById("submit").disabled) {
            checkAnswer();
        } else {
            continueBtn.click();
        }
    }
});

displayWord();
</script>

</body>
</html>

